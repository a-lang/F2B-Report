var debugvar;
var changevar;
$.getJSON("data.json",function(e){
changevar=e;
var t=e.Time;
var n=e.Uptime[0];
var r="";
for(var i=0;i<=e.Users.length-1;i++){r=r+e.Users[i];if(i!=e.Users.length-1){r=r+", "}}
var s=e.Uptime[2]+", "+e.Uptime[3]+", "+e.Uptime[4];
var o=e.CPU_Name;
var u=e.CPU_Cores;
var a=e.LastError[e.LastError.length-1];
var f=e.LastWar[e.LastWar.length-1];
var l="";
// var c=e.CPUs[0][10];
var c=e.CPUs[0][9];
for(var i=0;i<=e.CPUs.length-1;i++){
//l=l+"<tr>";for(var h=0;h<=11-1;h++){l=l+"<td>"+e.CPUs[i][h]+"</td>"}l=l+"</tr>"
l=l+"<tr>";for(var h=0;h<=10-1;h++){l=l+"<td>"+e.CPUs[i][h]+"</td>"}l=l+"</tr>"
}
var p=0;
var d=0;
var v=0;
var m=0;
var g="";
for(var i=0;i<=e.Disk.length-1;i++){
g=g+"<tr>";
for(var h=0;h<=6-1;h++){
if(h>=2-1&h<=4-1){g=g+"<td>"+Math.round(e.Disk[i][h]/1e3/10)/100+" GB"+"</td>"}else{g=g+"<td>"+e.Disk[i][h]+"</td>"}
}
p=p+Number(e.Disk[i][4].replace("%",""));d=d+Number(e.Disk[i][3]);v=v+Number(e.Disk[i][2]);m=m+Number(e.Disk[i][1]);g=g+"</tr>"
}
p=p/e.Disk.length;
var y="";
var b=e.Mem[0];
var w=e.Mem[1];
var E=e.Mem[2];
var S=e.Mem[3];
y=y+"<tr>";
y=y+"<td>Memory</td>";
for(var i=0;i<=e.Mem.length-1;i++){y=y+"<td>"+Math.round(e.Mem[i]/1e3/10)/100+" GB"+"</td>"}
y=y+"</tr>";
var x="";
var T=e.Swap[0];
var N=e.Swap[1];
var C=e.Swap[2];
var k=e.Swap[3];
x=x+"<tr>";
x=x+"<td>Swap</td>";
for(var i=0;i<=e.Swap.length-1;i++){x=x+"<td>"+Math.round(e.Swap[i]/1e3/10)/100+" GB"+"</td>"}
x=x+"</tr>";
var L="";
for(var i=0;i<=e.Network.length-1;i++){L=L+"<tr>";for(var h=0;h<=5-1;h++){L=L+"<td>"+e.Network[i][h]+"</td>"}L=L+"</tr>"}
var A="";
for(var i=0;i<=e.Process_10T_CPU.length-1;i++){A=A+"<tr>";for(var h=0;h<=4-1;h++){A=A+"<td>"+e.Process_10T_CPU[i][h]+"</td>"}A=A+"</tr>"}
var O="";
for(var i=0;i<=e.Process_10T_Mem.length-1;i++){O=O+"<tr>";for(var h=0;h<=4-1;h++){O=O+"<td>"+e.Process_10T_Mem[i][h]+"</td>"}O=O+"</tr>"}
// added for fail2ban report
var FR1="";
var FR2="";
var FR3="";
var FR4="";
for(var i=0;i<=e.F2B_10T_Attack.length-1;i++){FR1=FR1+"<tr>";for(var h=0;h<=4-1;h++){FR1=FR1+"<td>"+e.F2B_10T_Attack[i][h]+"</td>"}FR1=FR1+"</tr>"}
for(var i=0;i<=e.F2B_10T_IP.length-1;i++){FR2=FR2+"<tr>";for(var h=0;h<=4-1;h++){FR2=FR2+"<td>"+e.F2B_10T_IP[i][h]+"</td>"}FR2=FR2+"</tr>"}
for(var i=0;i<=e.F2B_10T_NET.length-1;i++){FR3=FR3+"<tr>";for(var h=0;h<=2-1;h++){FR3=FR3+"<td>"+e.F2B_10T_NET[i][h]+"</td>"}FR3=FR3+"</tr>"}
for(var i=0;i<=e.F2B_SVC_DAY.length-1;i++){FR4=FR4+"<tr>";for(var h=0;h<=3-1;h++){FR4=FR4+"<td>"+e.F2B_SVC_DAY[i][h]+"</td>"}FR4=FR4+"</tr>"}
// End
var M="";
for(var i=0;i<=e.LastError.length-1;i++){M=M+"<tr>";M=M+"<td>"+(i+1)+"</td>";M=M+"<td>"+e.LastError[i]+"</td>";M=M+"</tr>"}
if(e.LastError.length==0){M="<tr><td colspan=2>Congratulation! There is not any Error.</td></tr>"}
var _="";
for(var i=0;i<=e.LastWar.length-1;i++){_=_+"<tr>";_=_+"<td>"+(i+1)+"</td>";_=_+"<td>"+e.LastWar[i]+"</td>";_=_+"</tr>"}
if(e.LastWar.length==0){_="<tr><td colspan=2>Congratulation! There is not any Warning.</td></tr>"}
var D="";
for(var i=0;i<=e.Files.length-1;i++){
D=D+"<tr>";
for(var h=0;h<=2-1;h++){D=D+"<td>"+e.Files[i][h]+"</td>"}D=D+"</tr>"
}
if(e.Files.length==0){D="<tr><td colspan=3>Great! All files are safe.</td></tr>"}
var P="";
for(var i=0;i<=e.Update.length-1;i++){if(e.Update[i][0]!=""&&e.Update[i][1]!=""&&e.Update[i][2]){P=P+"<tr>";for(var h=0;h<=3-1;h++){P=P+"<td>"+e.Update[i][h]+"</td>"}P=P+"</tr>"}}
if(e.Update.length==0){P="<tr><td colspan=3>Great! You don't have update.</td></tr>"}
$("#ov1per").text("Used: "+Math.round((100-c)*100)/100+"%");
$("#ov2per").text("Used: "+Math.round(E/b*1e4)/100+"%"+"\n"+(Math.round(E/1e3/10)/100+" GB")+"/"+(Math.round(b/1e3/10)/100+" GB")+"\n"+"(Buffer/Cache: "+(Math.round(S/1e3/10)/100+" GB")+")");
$("#ov2per").html($("#ov2per").html().replace(/\n/g,"<br>"));
$("#ov3per").text("Used: "+p+"%"+"\n"+(Math.round(v/1e3/10)/100+" GB")+"/"+(Math.round(m/1e3/10)/100+" GB")+"\n"+" (Free: "+(Math.round(d/1e3/10)/100+" GB")+")");
$("#ov3per").html($("#ov3per").html().replace(/\n/g,"<br>"));
$("#ov4per").text("Used: "+Math.round(C/T*1e4)/100+"%"+"\n"+(Math.round(C/1e3/10)/100+" GB")+"/"+(Math.round(T/1e3/10)/100+" GB")+"\n"+"(Free: "+(Math.round(N/1e3/10)/100+" GB")+" Avail: "+(Math.round(k/1e3/10)/100+" GB")+")");
$("#ov4per").html($("#ov4per").html().replace(/\n/g,"<br>"));
$("#Time").text("Data Time: "+t);$("#Time2").text("Data Time: "+t);
$("#Uptime").text("Uptime: "+n.replace("up","   ").split(" ")[3].replace("day"," Day  "));
$("#OnlineUser").text("Online Users: "+r);
$("#LoadAvg").text("Load average: "+s);
$("#CPU_Name").text("CPU Name: "+o);
$("#CPU_Cores").text("CPU Cores: "+u);
$("#CPUtable").append(l);
$("#Disktable").append(g);
$("#MemXSwap").append(y);
$("#MemXSwap").append(x);$("#Network_Table").append(L);
$("#Process_10T_CPU_Table").append(A);
$("#Process_10T_Mem_Table").append(O);
// added for fail2ban report
$("#F2B_10T_Attack_Table").append(FR1);
$("#F2B_10T_IP_Table").append(FR2);
$("#F2B_10T_NET_Table").append(FR3);
$("#F2B_SVC_DAY_Table").append(FR4);
// End
$("#Files_Table").append(D);
$("#Last_10_Error_Table").append(M);
$("#Last_10_Warning_Table").append(_);
$("#LErr").text("Last Error: "+a);
$("#LWar").text("Last Warning: "+f);
$("#Updatetable").append(P);
var H=[{value:c,color:"#E0E0E0",highlight:"#F0F0F0",label:"Not Use"},{value:Math.round((100-c)*100)/100,color:"#0D8FDB",highlight:"#1FA1ED",label:"Used"}];
var B=[{value:Math.round((b-E)/1e3/10)/100,color:"#E0E0E0",highlight:"#F0F0F0",label:"Not Use"},{value:Math.round(E/1e3/10)/100,color:"#0D8FDB",highlight:"#1FA1ED",label:"Used"}];
var j=[{value:Math.round((m-v)/1e3/10)/100,color:"#E0E0E0",highlight:"#F0F0F0",label:"Not Use"},{value:Math.round(v/1e3/10)/100,color:"#0D8FDB",highlight:"#1FA1ED",label:"Used"}];
var F=[{value:Math.round(N/1e3/10)/100,color:"#E0E0E0",highlight:"#F0F0F0",label:"Not Use"},{value:Math.round((T-N)/1e3/10)/100,color:"#0D8FDB",highlight:"#1FA1ED",label:"Used"}];
netdata={labels:[],datasets:[{label:"Download",fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,0.9)",highlightFill:"rgba(220,220,220,0.75)",highlightStroke:"rgba(220,220,220,1)",data:[]},{label:"Upload",fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,0.8)",highlightFill:"rgba(151,187,205,0.75)",highlightStroke:"rgba(151,187,205,1)",data:[]}]};
e.Network.forEach(function(e){netdata.labels.push(e[0]);netdata.datasets[0].data.push(e[1]);netdata.datasets[1].data.push(e[2])});
$("#Net_Select").change(function(){netdata={labels:[],datasets:[{label:"Download",fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,0.9)",highlightFill:"rgba(220,220,220,0.75)",highlightStroke:"rgba(220,220,220,1)",data:[]},{label:"Upload",fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,0.8)",highlightFill:"rgba(151,187,205,0.75)",highlightStroke:"rgba(151,187,205,1)",data:[]}]};
if($("#Net_Select").val()=="Packets"){
changevar.Network.forEach(function(e){netdata.labels.push(e[0]);netdata.datasets[0].data.push(e[1]);netdata.datasets[1].data.push(e[2])})
}else{
changevar.Network.forEach(function(e){netdata.labels.push(e[0]);netdata.datasets[0].data.push(e[3]);netdata.datasets[1].data.push(e[4])})
}
var e=$("#net").get(0).getContext("2d");
var t=(new Chart(e)).Bar(netdata,netoptions)});
var I=$("#ov1").get(0).getContext("2d");
var q=(new Chart(I)).Doughnut(H,ovoptionsp);
var R=$("#ov2").get(0).getContext("2d");
var U=(new Chart(R)).Doughnut(B,ovoptionss);
var z=$("#ov3").get(0).getContext("2d");
var W=(new Chart(z)).Doughnut(j,ovoptionss);
var X=$("#ov4").get(0).getContext("2d");
var V=(new Chart(X)).Doughnut(F,ovoptionss);
var J=$("#net").get(0).getContext("2d");
var K=(new Chart(J)).Bar(netdata,netoptions)
});
$("body").scrollspy({offset:80,target:".sidebar"})
